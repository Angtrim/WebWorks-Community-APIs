<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" id="viewport"
	content="height=device-height,width=device-width,user-scalable=no" />
<style type="text/css">	
	body { background-color: #82d7ff }
</style>
<script type="text/JavaScript">
	function initLogging() {
		var ok = blackberry.nfc.ndef.init_logging();
		if (ok) {
		} else {
			alert("The was a problem initialising logging");
		}
	}
	function registerListener(record_type) {
		var ok = blackberry.nfc.ndef.register_ndef(ndefMessageReceived, onNdefError, record_type);
		if (ok) {
			alert("NDEFMessageListener registered OK for record type "+record_type);
		} else {
			alert("There was a problem registering a NDEFMessageListener for record type "+record_type)
		}
	}
	function removeListener(record_type) {
		var ok = blackberry.nfc.ndef.unregister_ndef(record_type);
		if (ok) {
			alert("NDEFMessageListener unregistered OK for record type "+record_type);
		} else {
			alert("The was a problem unregistering the NDEFMessageListener for record type "+record_type)
		}
	}
	// call back functions
	function ndefMessageReceived(ndef_message) {
		alert("NDEF message:"+ndef_message);
	}
	function onNdefError(error_message) {
		alert("NDEF error:"+error_message);
	}
	
</script>
</head>
<body onLoad="initLogging();registerListener('Sp');">
	<p>NFC Extension user</p>
	<table>
	  <tr><td><input type="submit" value="Register NDEF listener" onclick="registerListener('Sp')" /></td></tr>
	  <tr><td><input type="submit" value="Register unsupported type" onclick="registerListener('XX')" /></td></tr>
	  <tr><td><input type="submit" value="Unregister NDEF listener" onclick="removeListener('Sp')" /></td></tr>
	</table>

</body>
</html>



